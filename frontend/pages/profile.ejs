<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/profile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link rel="icon" type="image/png" href="../images/logo.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <title>Cineverse - Profile</title>
</head>

<body>
    <!--navigation bar-->
    <%- include('partials/navbar.ejs') %>

    <!--profile page-->
    <div class="profile-page">
      <div class="profile-page-container">
          <h1>Welcome, <%= fullname %> ðŸŽ‰</h1>
          <p class="profile-page-p">This is your profile page!</p>

          <div class="profile-page-card">
              <img src="<%= profilePic || '/images/profile1.jpg' %>" alt="Profile Picture" class="profile-page-pic">
              <% if (profilePic === '/images/profile1.jpg') { %>
                <button id="addPicBtn">Add Profile Picture</button>
              <% } else { %>
                <div class="profile-btns">
                    <button id="updatePicBtn">Update Picture</button>
                    <form action="/remove-profile-pic" method="POST" style="display:inline;">
                        <button type="submit">Remove Picture</button>
                    </form>
                </div>
              <% } %>
              <button id="toggle-password-form">Update Password</button>
              <p><strong>Full Name:</strong> <%= fullname %></p>
              <p><strong>Username:</strong> <%= username %></p>
              <p><strong>Email:</strong> <%= email %></p>
          </div>
      </div>
   </div>

   <!--upload profile picture modal-->
   <div id="uploadModal" class="upload-modal">
    <div class="upload-modal-content">
        <span class="close-btn">&times;</span>
        <form action="/upload-profile-pic" method="POST" enctype="multipart/form-data">
            <label>Select new profile picture:</label>
            <input type="file" name="profilePic" accept="image/*" required>
            <button type="submit">Upload</button>
        </form>
    </div>
   </div>

   <!-- password change modal -->
   <div id="passwordModal" class="upload-modal">
     <div class="upload-modal-content">
       <span class="close-btn">&times;</span>
       <form id="change-password-form">
         <input type="password" id="old-password" placeholder="Old Password" required />
         <input type="password" id="new-password" placeholder="New Password" required />
         <input type="password" id="confirm-password" placeholder="Confirm New Password" required />
         <button type="submit">Change Password</button>
       </form>
     </div>
   </div>


    <!--footer-->
    <%- include('partials/footer.ejs') %>

    <script src="/scripts/profile.js"></script>
    <script src="/scripts/navbar.js"></script>
    <script src="/scripts/app.js"></script>
    
</body>
</html>